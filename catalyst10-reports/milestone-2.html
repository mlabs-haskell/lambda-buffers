<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Milestone 2: Javascript/Typescript support - Lambda Buffers documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../using-lambdabuffers.html"><strong aria-hidden="true">2.</strong> Using LambdaBuffers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../haskell.html"><strong aria-hidden="true">2.1.</strong> LambdaBuffers to Haskell</a></li><li class="chapter-item expanded "><a href="../purescript.html"><strong aria-hidden="true">2.2.</strong> LambdaBuffers to Purescript</a></li><li class="chapter-item expanded "><a href="../plutarch.html"><strong aria-hidden="true">2.3.</strong> LambdaBuffers to Plutarch</a></li><li class="chapter-item expanded "><a href="../rust.html"><strong aria-hidden="true">2.4.</strong> LambdaBuffers to Rust</a></li><li class="chapter-item expanded "><a href="../typescript.html"><strong aria-hidden="true">2.5.</strong> LambdaBuffers to Typescript</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../getting-started.html"><strong aria-hidden="true">3.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="../design.html"><strong aria-hidden="true">4.</strong> Design</a></li><li class="chapter-item expanded "><a href="../api.html"><strong aria-hidden="true">5.</strong> API</a></li><li class="chapter-item expanded "><a href="../syntax.html"><strong aria-hidden="true">6.</strong> LambdaBuffers Frontend (.lbf) syntax</a></li><li class="chapter-item expanded "><a href="../compiler.html"><strong aria-hidden="true">7.</strong> Compiler</a></li><li class="chapter-item expanded "><a href="../codegen.html"><strong aria-hidden="true">8.</strong> Codegen</a></li><li class="chapter-item expanded "><a href="../command-line-interface.html"><strong aria-hidden="true">9.</strong> Command line interface</a></li><li class="chapter-item expanded "><a href="../comparison-matrix.html"><strong aria-hidden="true">10.</strong> Comparison matrix</a></li><li class="chapter-item expanded "><a href="../catalyst-reports.html"><strong aria-hidden="true">11.</strong> Catalyst reports</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../catalyst09-reports/index.html"><strong aria-hidden="true">11.1.</strong> Catalyst 9 reports</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../catalyst09-reports/milestone-1.html"><strong aria-hidden="true">11.1.1.</strong> Milestone 1: Research</a></li><li class="chapter-item expanded "><a href="../catalyst09-reports/milestone-2.html"><strong aria-hidden="true">11.1.2.</strong> Milestone 2: End to end proof of concept</a></li><li class="chapter-item expanded "><a href="../catalyst09-reports/milestone-3.html"><strong aria-hidden="true">11.1.3.</strong> Milestone 3: Testing and documentation</a></li><li class="chapter-item expanded "><a href="../catalyst09-reports/milestone-3.html"><strong aria-hidden="true">11.1.4.</strong> Milestone 4: Project adoption</a></li></ol></li><li class="chapter-item expanded "><a href="../catalyst10-reports/index.html"><strong aria-hidden="true">11.2.</strong> Catalyst 10 reports</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../catalyst10-reports/milestone-1.html"><strong aria-hidden="true">11.2.1.</strong> Milestone 1: Rust support</a></li><li class="chapter-item expanded "><a href="../catalyst10-reports/milestone-2.html" class="active"><strong aria-hidden="true">11.2.2.</strong> Milestone 2: Javascript/Typescript support</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Lambda Buffers documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="catalyst-milestone-2-javascripttypescript-support"><a class="header" href="#catalyst-milestone-2-javascripttypescript-support">Catalyst milestone 2: Javascript/Typescript support</a></h1>
<p>While the milestone technically requires Javascript support, we implemented <a href="https://www.typescriptlang.org/">Typescript</a> support which is a <a href="https://www.typescriptlang.org/docs/handbook/typescript-from-scratch.html#a-typed-superset-of-javascript">typed superset of Javascript</a>. This was done to better interpolate with existing Javascript/Typescript libraries on Cardano such as <a href="https://github.com/spacebudz/lucid">lucid</a>, <a href="https://github.com/input-output-hk/cardano-js-sdk">cardano-js-sdk</a>, <a href="https://www.npmjs.com/package/@emurgo/cardano-serialization-lib-nodejs">cardano-serialization-lib</a>, etc. With Typescript support, we get Javascript support for free as the compilation from Typescript to Javascript is a well established practise.</p>
<h2 id="outputs"><a class="header" href="#outputs">Outputs</a></h2>
<ul>
<li>
<p><input disabled="" type="checkbox" checked=""/>
A LambdaBuffers code generation module that outputs type constructors and derived implementations in the Javascript programming language given a LambdaBuffers schema.</p>
<ul>
<li>The module implementation is in <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/2e2ed98f4df7f207ec3cf131adf5b47b202e248f/lambda-buffers-codegen/src/LambdaBuffers/Codegen/Typescript">lambda-buffers-codegen/src/LambdaBuffers/Codegen/Typescript</a>.</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
A Javascript library that implements the LambdaBuffers Prelude runtime.
This module would include standardised JSON encoding and equality
implementations for all declared type class instances in the schema.</p>
<ul>
<li>A standalone Prelude library for Typescript was implemented together with its runtime for LambdaBuffers. These can be found here:
<ul>
<li><a href="https://github.com/mlabs-haskell/prelude-typescript">prelude-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/343a1a900f42dcf5b1c1a7e330eafb07c280908b/runtimes/typescript/lbr-prelude">runtimes/typescript/lbr-prelude</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
A Javascript test suite that assures the manually implemented and automatically generated implementations are consistent with the predefined LambdaBuffers Prelude golden data set of JSON files and perform correct implementation derivation.</p>
<ul>
<li>A test suite ensuring that the manually implemented and automatically generated implementations can be found here: <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-prelude/lbt-prelude-typescript">testsuites/lbt-prelude/lbt-prelude-typescript</a>.</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
A Javascript library that implements the LambdaBuffers Plutus runtime. This module would include standardised PlutusData encoding implementations for all declared type class instances in the Plutus schema.</p>
<ul>
<li>A standalone Plutus library for Typescript was implemented together with its runtime for LambdaBuffers. These can be found here:
<ul>
<li><a href="https://github.com/mlabs-haskell/plutus-ledger-api-typescript">plutus-ledger-api-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/dc5ee6797d1230661d6bb3dfa658eddeadd7cb60/runtimes/typescript/lbr-plutus">runtimes/typescript/lbr-plutus</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
A Javascript test suite that assures the manually implemented and automatically generated implementations are consistent with the predefined LambdaBuffers Plutus golden data set of PlutusData encoded files and perform correct implementation derivation.</p>
<ul>
<li>A test suite ensuring that the manually implemented and automatically generated implementations can be found here: <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-plutus/lbt-plutus-typescript">testsuites/lbt-plutus/lbt-plutus-typescript</a></li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
Nix devops modules (Nix API) for streamlining the LambdaBuffers code generation pipeline to Javascript.</p>
<ul>
<li>New flake modules were implemented to easily generate NPM packages from LambdaBuffers
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-typescript.nix">lbf-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-prelude-typescript.nix">lbf-prelude-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-plutus-typescript.nix">lbf-plutus-typescript</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox" checked=""/>
Documentation on LambdaBuffers usage patterns for Javascript.</p>
<ul>
<li><a href="https://mlabs-haskell.github.io/lambda-buffers/typescript.html">A new page was created for the TypeScript use case</a></li>
</ul>
</li>
</ul>
<h2 id="acceptance-criteria"><a class="header" href="#acceptance-criteria">Acceptance Criteria</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
LambdaBuffers schemas that are based on the LambdaBuffers Prelude module can be used in Javascript projects to specify application types.
<ul>
<li>Test libraries for Prelude demonstrate how TypeScript code for the LambdaBuffers Prelude is generated to TypeScript and used in a library: <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-prelude/lbt-prelude-typescript">testsuites/lbt-prelude/lbt-prelude-typescript</a></li>
<li>Moreover, there is a <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/1d806a1710aab625ea520c596a72338c5bde578d/docs/typescript-prelude">docs/typescript-prelude</a> sample project which also demonstrates this.</li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
LambdaBuffers schemas that are based on the LambdaBuffers Plutus module can be used in Javascript projects to specify application types.
<ul>
<li>Test libraries for Plutus demonstrate how TypeScript code for the LambdaBuffers Prelude is generated to TypeScript and used in a library: <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-plutus/lbt-plutus-typescript">testsuites/lbt-plutus/lbt-plutus-typescript</a></li>
<li>Moreover, there is a <a href="https://github.com/mlabs-haskell/lambda-buffers/tree/1d806a1710aab625ea520c596a72338c5bde578d/docs/typescript-plutus">docs/typescript-plutus</a> sample project which also demonstrates this.</li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The documentation and devops tooling is available to facilitate easy adoption.
<ul>
<li>Similarly to other languages supported by LambdaBuffers, a <a href="https://github.com/mlabs-haskell/flake-lang.nix/tree/5bb4fdf556a2f2f23717c654c186f13f28b9c277/flake-lang/typescript">TypeScript flake</a> is implemented along with its documentation.
The testing libraries also serve as an example to understand how to use the Nix utilities:
<a href="https://github.com/mlabs-haskell/lambda-buffers/blob/4c6304cf3a3a0c08bbb46e94532a293fdea513e9/testsuites/lbt-plutus/lbt-plutus-typescript/build.nix">testsuites/lbt-plutus/lbt-plutus-typescript/build.nix</a>.</li>
</ul>
</li>
</ul>
<h2 id="evidence-of-milestone-completion"><a class="header" href="#evidence-of-milestone-completion">Evidence of Milestone Completion</a></h2>
<ul>
<li><input disabled="" type="checkbox" checked=""/>
The completed and reviewed LambdaBuffers Prelude runtime library is available for the Javascript programming language.
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/343a1a900f42dcf5b1c1a7e330eafb07c280908b/runtimes/typescript/lbr-prelude">runtimes/typescript/lbr-prelude</a></li>
<li><a href="https://github.com/mlabs-haskell/prelude-typescript">prelude-typescript</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The completed and reviewed LambdaBuffers Plutus runtime library is available for the Javascript programming language.
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/dc5ee6797d1230661d6bb3dfa658eddeadd7cb60/runtimes/typescript/lbr-plutus">runtimes/typescript/lbr-plutus</a></li>
<li><a href="https://github.com/mlabs-haskell/plutus-ledger-api-typescript">plutus-ledger-api-typescript</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The completed and reviewed LambdaBuffers Prelude test suite is available and is passing in CI for the Javascript programming language.
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-prelude/lbt-prelude-typescript">testsuites/lbt-prelude/lbt-prelude-typescript</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The completed and reviewed LambdaBuffers Plutus test suite is available and is passing in CI for the Javascript programming language.
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/tree/50bfbc4a182275d42be978b5a251530bab84f4aa/testsuites/lbt-plutus/lbt-plutus-typescript">testsuites/lbf-plutus/lbt-plutus-typescript</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The completed and reviewed Nix API for LambdaBuffers Javascript support is available.
<ul>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-typescript.nix">lbf-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-prelude-typescript.nix">lbf-prelude-typescript</a></li>
<li><a href="https://github.com/mlabs-haskell/lambda-buffers/blob/f59bdb78d06fa677567d053eddb3d1fe46250fd8/extras/lbf-nix/lbf-plutus-typescript.nix">lbf-plutus-typescript</a></li>
</ul>
</li>
<li><input disabled="" type="checkbox" checked=""/>
The  completed and reviewed LambdaBuffers for Javascript documentation is available.
<ul>
<li><a href="https://mlabs-haskell.github.io/lambda-buffers/typescript.html">TypeScript documentation</a> at <a href="https://github.com/mlabs-haskell/lambda-buffers/blob/ecb7e0d115aafd5238ee4a24d340d55a440741ac/docs/typescript.md">docs/typescript.md</a></li>
</ul>
</li>
</ul>
<h2 id="demo-files"><a class="header" href="#demo-files">Demo files</a></h2>
<ul>
<li>Demo project: <a href="https://github.com/mlabs-haskell/lambda-buffers-for-cardano/tree/main/transactions/demo-typescript">lambda-buffers-for-cardano</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../catalyst10-reports/milestone-1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../catalyst10-reports/milestone-1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
